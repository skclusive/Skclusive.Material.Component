using Skclusive.Core.Component;

namespace Skclusive.Material.Tooltip
{
    public class TooltipHelpersScript : Scripted
    {
        public TooltipHelpersScript() : base("TooltipHelpersScript")
        {
        }

        protected override string GetScript()
        {
            return
                @"!function(){""use strict"";function e(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function t(e){if(""[object Window]""!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}function n(e){var n=t(e);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function r(e){return e instanceof t(e).Element||e instanceof Element}function o(e){return e instanceof t(e).HTMLElement||e instanceof HTMLElement}function i(e){return e?(e.nodeName||"""").toLowerCase():null}function a(e){return(r(e)?e.ownerDocument:e.document).documentElement}function s(t){return e(a(t)).left+n(t).scrollLeft}function f(e){return t(e).getComputedStyle(e)}function c(e){var t=f(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function p(r,f,p){void 0===p&&(p=!1);var u,d,l=a(f),m=e(r),h={scrollLeft:0,scrollTop:0},v={x:0,y:0};return p||((""body""!==i(f)||c(l))&&(h=(u=f)!==t(u)&&o(u)?{scrollLeft:(d=u).scrollLeft,scrollTop:d.scrollTop}:n(u)),o(f)?((v=e(f)).x+=f.clientLeft,v.y+=f.clientTop):l&&(v.x=s(l))),{x:m.left+h.scrollLeft-v.x,y:m.top+h.scrollTop-v.y,width:m.width,height:m.height}}function u(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function d(e){return""html""===i(e)?e:e.assignedSlot||e.parentNode||e.host||a(e)}function l(e,n){void 0===n&&(n=[]);var r=function e(t){return[""html"",""body"",""#document""].indexOf(i(t))>=0?t.ownerDocument.body:o(t)&&c(t)?t:e(d(t))}(e),a=""body""===i(r),s=t(r),f=a?[s].concat(s.visualViewport||[],c(r)?r:[]):r,p=n.concat(f);return a?p:p.concat(l(d(f)))}function m(e){return[""table"",""td"",""th""].indexOf(i(e))>=0}function h(e){return o(e)&&""fixed""!==f(e).position?e.offsetParent:null}function v(e){for(var n=t(e),r=h(e);r&&m(r);)r=h(r);return r&&""body""===i(r)&&""static""===f(r).position?n:r||n}var g=""top"",y=""bottom"",b=""right"",w=""left"",x=[g,y,b,w],O=x.reduce((function(e,t){return e.concat([t+""-start"",t+""-end""])}),[]),M=[].concat(x,[""auto""]).reduce((function(e,t){return e.concat([t,t+""-start"",t+""-end""])}),[]),j=[""beforeRead"",""read"",""afterRead"",""beforeMain"",""main"",""afterMain"",""beforeWrite"",""write"",""afterWrite""];function E(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach((function(r){if(!n.has(r)){var o=t.get(r);o&&e(o)}})),r.push(o)}(e)})),r}function D(e){return e.split(""-"")[0]}var P={placement:""bottom"",modifiers:[],strategy:""absolute""};function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&""function""==typeof e.getBoundingClientRect)}))}function L(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,o=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?P:i;return function(e,t,n){void 0===n&&(n=a);var i,s,f={placement:""bottom"",orderedModifiers:[],options:Object.assign({},P,{},a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],d=!1,m={state:f,setOptions:function(n){h(),f.options=Object.assign({},a,{},f.options,{},n),f.scrollParents={reference:r(e)?l(e):e.contextElement?l(e.contextElement):[],popper:l(t)};var i,s,p=function(e){var t=E(e);return j.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((i=[].concat(o,f.options.modifiers),s=i.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,{},t,{options:Object.assign({},n.options,{},t.options),data:Object.assign({},n.data,{},t.data)}):t,e}),{}),Object.keys(s).map((function(e){return s[e]}))));return f.orderedModifiers=p.filter((function(e){return e.enabled})),f.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if(""function""==typeof o){var i=o({state:f,name:t,instance:m,options:r});c.push(i||function(){})}})),m.update()},forceUpdate:function(){if(!d){var e=f.elements,t=e.reference,n=e.popper;if(k(t,n)){f.rects={reference:p(t,v(n),""fixed""===f.options.strategy),popper:u(n)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach((function(e){return f.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<f.orderedModifiers.length;r++)if(!0!==f.reset){var o=f.orderedModifiers[r],i=o.fn,a=o.options,s=void 0===a?{}:a,c=o.name;""function""==typeof i&&(f=i({state:f,options:s,name:c,instance:m})||f)}else f.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){m.forceUpdate(),e(f)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(i())}))}))),s}),destroy:function(){h(),d=!0}};if(!k(e,t))return m;function h(){c.forEach((function(e){return e()})),c=[]}return m.setOptions(n).then((function(e){!d&&n.onFirstUpdate&&n.onFirstUpdate(e)})),m}}var B={passive:!0};function W(e){return e.split(""-"")[1]}function A(e){return[""top"",""bottom""].indexOf(e)>=0?""x"":""y""}function H(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?D(o):null,a=o?W(o):null,s=n.x+n.width/2-r.width/2,f=n.y+n.height/2-r.height/2;switch(i){case g:t={x:s,y:n.y-r.height};break;case y:t={x:s,y:n.y+n.height};break;case b:t={x:n.x+n.width,y:f};break;case w:t={x:n.x-r.width,y:f};break;default:t={x:n.x,y:n.y}}var c=i?A(i):null;if(null!=c){var p=""y""===c?""height"":""width"";switch(a){case""start"":t[c]=Math.floor(t[c])-Math.floor(n[p]/2-r[p]/2);break;case""end"":t[c]=Math.floor(t[c])+Math.ceil(n[p]/2-r[p]/2)}}return t}var T={top:""auto"",right:""auto"",bottom:""auto"",left:""auto""};function R(e){var n,r=e.popper,o=e.popperRect,i=e.placement,s=e.offsets,f=e.position,c=e.gpuAcceleration,p=e.adaptive,u=function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(s),d=u.x,l=u.y,m=s.hasOwnProperty(""x""),h=s.hasOwnProperty(""y""),x=w,O=g,M=window;if(p){var j=v(r);j===t(r)&&(j=a(r)),i===g&&(O=y,l-=j.clientHeight-o.height,l*=c?1:-1),i===w&&(x=b,d-=j.clientWidth-o.width,d*=c?1:-1)}var E,D=Object.assign({position:f},p&&T);return c?Object.assign({},D,((E={})[O]=h?""0"":"""",E[x]=m?""0"":"""",E.transform=(M.devicePixelRatio||1)<2?""translate(""+d+""px, ""+l+""px)"":""translate3d(""+d+""px, ""+l+""px, 0)"",E)):Object.assign({},D,((n={})[O]=h?l+""px"":"""",n[x]=m?d+""px"":"""",n.transform="""",n))}var S={left:""right"",right:""left"",bottom:""top"",top:""bottom""};function q(e){return e.replace(/left|right|bottom|top/g,(function(e){return S[e]}))}var I={start:""end"",end:""start""};function C(e){return e.replace(/start|end/g,(function(e){return I[e]}))}function N(e){return parseFloat(e)||0}function U(e){var n=t(e),r=function(e){var t=o(e)?f(e):{};return{top:N(t.borderTopWidth),right:N(t.borderRightWidth),bottom:N(t.borderBottomWidth),left:N(t.borderLeftWidth)}}(e),a=""html""===i(e),c=s(e),p=e.clientWidth+r.right,u=e.clientHeight+r.bottom;return a&&n.innerHeight-e.clientHeight>50&&(u=n.innerHeight-r.bottom),{top:a?0:e.clientTop,right:e.clientLeft>r.left?r.right:a?n.innerWidth-p-c:e.offsetWidth-p,bottom:a?n.innerHeight-u:e.offsetHeight-u,left:a?c:e.clientLeft}}function V(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function z(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function F(r,i){return""viewport""===i?z(function(e){var n=t(e),r=n.visualViewport,o=n.innerWidth,i=n.innerHeight;return r&&/iPhone|iPod|iPad/.test(navigator.platform)&&(o=r.width,i=r.height),{width:o,height:i,x:0,y:0}}(r)):o(i)?e(i):z(function(e){var r=t(e),o=n(e),i=p(a(e),r);return i.height=Math.max(i.height,r.innerHeight),i.width=Math.max(i.width,r.innerWidth),i.x=-o.scrollLeft,i.y=-o.scrollTop,i}(a(r)))}function _(e,t,n){var i=""clippingParents""===t?function(e){var t=l(e),n=[""absolute"",""fixed""].indexOf(f(e).position)>=0&&o(e)?v(e):e;return r(n)?t.filter((function(e){return r(e)&&V(e,n)})):[]}(e):[].concat(t),s=[].concat(i,[n]),c=s[0],p=s.reduce((function(t,n){var r=F(e,n),i=U(o(n)?n:a(e));return t.top=Math.max(r.top+i.top,t.top),t.right=Math.min(r.right-i.right,t.right),t.bottom=Math.min(r.bottom-i.bottom,t.bottom),t.left=Math.max(r.left+i.left,t.left),t}),F(e,c));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function X(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function Y(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function G(t,n){void 0===n&&(n={});var o=n,i=o.placement,s=void 0===i?t.placement:i,f=o.boundary,c=void 0===f?""clippingParents"":f,p=o.rootBoundary,u=void 0===p?""viewport"":p,d=o.elementContext,l=void 0===d?""popper"":d,m=o.altBoundary,h=void 0!==m&&m,v=o.padding,w=void 0===v?0:v,O=X(""number""!=typeof w?w:Y(w,x)),M=""popper""===l?""reference"":""popper"",j=t.elements.reference,E=t.rects.popper,D=t.elements[h?M:l],P=_(r(D)?D:D.contextElement||a(t.elements.popper),c,u),k=e(j),L=H({reference:k,element:E,strategy:""absolute"",placement:s}),B=z(Object.assign({},E,{},L)),W=""popper""===l?B:k,A={top:P.top-W.top+O.top,bottom:W.bottom-P.bottom+O.bottom,left:P.left-W.left+O.left,right:W.right-P.right+O.right},T=t.modifiersData.offset;if(""popper""===l&&T){var R=T[s];Object.keys(A).forEach((function(e){var t=[b,y].indexOf(e)>=0?1:-1,n=[g,y].indexOf(e)>=0?""y"":""x"";A[e]+=R[n]*t}))}return A}function J(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,f=n.allowedAutoPlacements,c=void 0===f?M:f,p=W(r),u=(p?s?O:O.filter((function(e){return W(e)===p})):x).filter((function(e){return c.indexOf(e)>=0})).reduce((function(t,n){return t[n]=G(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[D(n)],t}),{});return Object.keys(u).sort((function(e,t){return u[e]-u[t]}))}function K(e,t,n){return Math.max(e,Math.min(t,n))}function Q(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Z(e){return[g,b,y,w].some((function(t){return e[t]>=0}))}var $=L({defaultModifiers:[{name:""eventListeners"",enabled:!0,phase:""write"",fn:function(){},effect:function(e){var n=e.state,r=e.instance,o=e.options,i=o.scroll,a=void 0===i||i,s=o.resize,f=void 0===s||s,c=t(n.elements.popper),p=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&p.forEach((function(e){e.addEventListener(""scroll"",r.update,B)})),f&&c.addEventListener(""resize"",r.update,B),function(){a&&p.forEach((function(e){e.removeEventListener(""scroll"",r.update,B)})),f&&c.removeEventListener(""resize"",r.update,B)}},data:{}},{name:""popperOffsets"",enabled:!0,phase:""read"",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=H({reference:t.rects.reference,element:t.rects.popper,strategy:""absolute"",placement:t.placement})},data:{}},{name:""computeStyles"",enabled:!0,phase:""beforeWrite"",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s={placement:D(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,{},R(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},R(Object.assign({},s,{offsets:t.modifiersData.arrow,position:""absolute"",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{""data-popper-placement"":t.placement})},data:{}},{name:""applyStyles"",enabled:!0,phase:""write"",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},a=t.elements[e];o(a)&&i(a)&&(Object.assign(a.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"""":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:""0"",top:""0"",margin:""0""},arrow:{position:""absolute""},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],a=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="""",e}),{});o(r)&&i(r)&&(Object.assign(r.style,s),Object.keys(a).forEach((function(e){r.removeAttribute(e)})))}))}},requires:[""computeStyles""]},{name:""offset"",enabled:!0,phase:""main"",requires:[""popperOffsets""],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=M.reduce((function(e,n){return e[n]=function(e,t,n){var r=D(e),o=[w,g].indexOf(r)>=0?-1:1,i=""function""==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[w,b].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,i),e}),{}),s=a[t.placement],f=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},{name:""flip"",enabled:!0,phase:""main"",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,f=n.fallbackPlacements,c=n.padding,p=n.boundary,u=n.rootBoundary,d=n.altBoundary,l=n.flipVariations,m=void 0===l||l,h=n.allowedAutoPlacements,v=t.options.placement,x=D(v),O=f||(x===v||!m?[q(v)]:function(e){if(""auto""===D(e))return[];var t=q(e);return[C(e),t,C(t)]}(v)),M=[v].concat(O).reduce((function(e,n){return e.concat(""auto""===D(n)?J(t,{placement:n,boundary:p,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:h}):n)}),[]),j=t.rects.reference,E=t.rects.popper,P=new Map,k=!0,L=M[0],B=0;B<M.length;B++){var A=M[B],H=D(A),T=""start""===W(A),R=[g,y].indexOf(H)>=0,S=R?""width"":""height"",I=G(t,{placement:A,boundary:p,rootBoundary:u,altBoundary:d,padding:c}),N=R?T?b:w:T?y:g;j[S]>E[S]&&(N=q(N));var U=q(N),V=[];if(i&&V.push(I[H]<=0),s&&V.push(I[N]<=0,I[U]<=0),V.every((function(e){return e}))){L=A,k=!1;break}P.set(A,V)}if(k)for(var z=function(e){var t=M.find((function(t){var n=P.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return L=t,""break""},F=m?3:1;F>0;F--){if(""break""===z(F))break}t.placement!==L&&(t.modifiersData[r]._skip=!0,t.placement=L,t.reset=!0)}},requiresIfExists:[""offset""],data:{_skip:!1}},{name:""preventOverflow"",enabled:!0,phase:""main"",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0!==a&&a,f=n.boundary,c=n.rootBoundary,p=n.altBoundary,d=n.padding,l=n.tether,m=void 0===l||l,h=n.tetherOffset,x=void 0===h?0:h,O=G(t,{boundary:f,rootBoundary:c,padding:d,altBoundary:p}),M=D(t.placement),j=W(t.placement),E=!j,P=A(M),k=""x""===P?""y"":""x"",L=t.modifiersData.popperOffsets,B=t.rects.reference,H=t.rects.popper,T=""function""==typeof x?x(Object.assign({},t.rects,{placement:t.placement})):x,R={x:0,y:0};if(L){if(i){var S=""y""===P?g:w,q=""y""===P?y:b,I=""y""===P?""height"":""width"",C=L[P],N=L[P]+O[S],U=L[P]-O[q],V=m?-H[I]/2:0,z=""start""===j?B[I]:H[I],F=""start""===j?-H[I]:-B[I],_=t.elements.arrow,X=m&&_?u(_):{width:0,height:0},Y=t.modifiersData[""arrow#persistent""]?t.modifiersData[""arrow#persistent""].padding:{top:0,right:0,bottom:0,left:0},J=Y[S],Q=Y[q],Z=K(0,B[I],X[I]),$=E?B[I]/2-V-Z-J-T:z-Z-J-T,ee=E?-B[I]/2+V+Z+Q+T:F+Z+Q+T,te=t.elements.arrow&&v(t.elements.arrow),ne=te?""y""===P?te.clientTop||0:te.clientLeft||0:0,re=t.modifiersData.offset?t.modifiersData.offset[t.placement][P]:0,oe=L[P]+$-re-ne,ie=L[P]+ee-re,ae=K(m?Math.min(N,oe):N,C,m?Math.max(U,ie):U);L[P]=ae,R[P]=ae-C}if(s){var se=""x""===P?g:w,fe=""x""===P?y:b,ce=L[k],pe=K(ce+O[se],ce,ce-O[fe]);L[k]=pe,R[k]=pe-ce}t.modifiersData[r]=R}},requiresIfExists:[""offset""]},{name:""arrow"",enabled:!0,phase:""main"",fn:function(e){var t,n=e.state,r=e.name,o=n.elements.arrow,i=n.modifiersData.popperOffsets,a=D(n.placement),s=A(a),f=[w,b].indexOf(a)>=0?""height"":""width"";if(o&&i){var c=n.modifiersData[r+""#persistent""].padding,p=u(o),d=""y""===s?g:w,l=""y""===s?y:b,m=n.rects.reference[f]+n.rects.reference[s]-i[s]-n.rects.popper[f],h=i[s]-n.rects.reference[s],x=v(o),O=x?""y""===s?x.clientHeight||0:x.clientWidth||0:0,M=m/2-h/2,j=c[d],E=O-p[f]-c[l],P=O/2-p[f]/2+M,k=K(j,P,E),L=s;n.modifiersData[r]=((t={})[L]=k,t.centerOffset=k-P,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,o=n.element,i=void 0===o?""[data-popper-arrow]"":o,a=n.padding,s=void 0===a?0:a;null!=i&&(""string""!=typeof i||(i=t.elements.popper.querySelector(i)))&&V(t.elements.popper,i)&&(t.elements.arrow=i,t.modifiersData[r+""#persistent""]={padding:X(""number""!=typeof s?s:Y(s,x))})},requires:[""popperOffsets""],requiresIfExists:[""preventOverflow""]},{name:""hide"",enabled:!0,phase:""main"",requiresIfExists:[""preventOverflow""],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=G(t,{elementContext:""reference""}),s=G(t,{altBoundary:!0}),f=Q(a,r),c=Q(s,o,i),p=Z(f),u=Z(c);t.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:c,isReferenceHidden:p,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{""data-popper-reference-hidden"":p,""data-popper-escaped"":u})}}]});window.Skclusive={...window.Skclusive,Material:{...(window.Skclusive||{}).Material,Tooltip:new class{constructor(){this.lastId=0,this.instanceMap=new Map}generateId(){return this.lastId++}destroyPopper(e){let t=this.instanceMap.get(e);t&&(this.instanceMap.delete(e),t.destroy())}updatePopper(e){let t=this.instanceMap.get(e);t&&t.update()}createBlazorPopper(e,t,n){const r=$(e,t,n);let o=this.generateId();return this.instanceMap.set(o,r),{id:o,state:{placement:r.state.placement,orderedModifiers:r.state.orderedModifiers,options:r.state.options,modifiersData:r.state.modifiersData,attributes:r.state.attributes,styles:r.state.styles},setOptions:r.setOptions,forceUpdate:r.forceUpdate,update:r.update,destroy:r.destroy}}}}}}();";
        }
    }
}
